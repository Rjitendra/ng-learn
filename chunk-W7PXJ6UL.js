import{Ab as T,Bb as k,Gb as d,Hb as r,Kb as q,Lb as j,Nb as _,Ob as O,Ua as a,W as C,Z as g,a as b,ac as i,b as v,cc as f,dc as R,eb as S,fa as w,ka as M,la as I,n as x,pa as y,rc as l,sc as D,ta as p,z as E,zb as P}from"./chunk-IDVU2DUC.js";function F(n,e){let o=!e?.manualCleanup?e?.injector?.get(y)??w(y):null,s=U(e?.equal),u;e?.requireSync?u=p({kind:0},{equal:s}):u=p({kind:1,value:e?.initialValue},{equal:s});let m,h=n.subscribe({next:c=>u.set({kind:1,value:c}),error:c=>{u.set({kind:2,error:c}),m?.()},complete:()=>{m?.()}});if(e?.requireSync&&u().kind===0)throw new g(601,!1);return m=o?.onDestroy(h.unsubscribe.bind(h)),l(()=>{let c=u();switch(c.kind){case 1:return c.value;case 2:throw c.error;case 0:throw new g(601,!1)}},{equal:e?.equal})}function U(n=Object.is){return(e,t)=>e.kind===1&&t.kind===1&&n(e.value,t.value)}function $(n,e){if(n&1){let t=q();d(0,"div")(1,"p"),i(2),d(3,"input",0),_("input",function(s){let u=M(t).$index,m=O();return I(m.changeQuantity(u,s.target.value))}),r()()()}if(n&2){let t=e.$implicit;a(2),R(" ",t.name," - \u20B9",t.price," x "),a(),j("value",t.quantity)}}var N=class n{logEffect=D(()=>{console.log(`\u{1F4AC} Recalculated total: \u20B9${this.finalTotal()}`)});products=p([{name:"Laptop",price:6e4,quantity:1},{name:"Phone",price:3e4,quantity:2}]);remoteDiscount$=E(0,5e3).pipe(C(()=>x(Math.floor(Math.random()*20)+5)));discountPercent=F(this.remoteDiscount$,{initialValue:10});subTotal=l(()=>this.products().reduce((e,t)=>e+t.price*t.quantity,0));discountAmount=l(()=>Math.floor(this.subTotal()*(this.discountPercent()/100)));finalTotal=l(()=>this.subTotal()-this.discountAmount());changeQuantity(e,t){let s=[...this.products()];s[e]=v(b({},s[e]),{quantity:+t}),this.products.set(s)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=S({type:n,selectors:[["ng-product-price"]],decls:16,vars:4,consts:[["type","number",3,"input","value"]],template:function(t,o){t&1&&(d(0,"h2"),i(1,"\u{1F6D2} Product Price Calculator"),r(),T(2,$,4,3,"div",null,P),d(4,"p")(5,"strong"),i(6,"\u{1F9EE} Subtotal:"),r(),i(7),r(),d(8,"p")(9,"strong"),i(10),r(),i(11),r(),d(12,"p")(13,"strong"),i(14,"\u{1F4B0} Total:"),r(),i(15),r()),t&2&&(a(2),k(o.products()),a(5),f(" \u20B9",o.subTotal()),a(3),f("\u{1F381} Discount (",o.discountPercent(),"%):"),a(),f(" \u20B9",o.discountAmount(),`
`),a(4),f(" \u20B9",o.finalTotal()))},encapsulation:2})};export{N as ProductPriceComponent};
