<!-- <h2>Product Manager</h2>

@if(model$ | async; as model){
<form>
  <mat-form-field appearance="fill">
    <mat-label>Title</mat-label>
    <input matInput [(ngModel)]="model.title" name="title" required />
  </mat-form-field>

  <mat-form-field appearance="fill">
    <mat-label>Description</mat-label>
    <input matInput [(ngModel)]="model.description" name="description" required />
  </mat-form-field>

  <mat-form-field appearance="fill">
    <mat-label>Price</mat-label>
    <input matInput [(ngModel)]="model.price" name="price" required />
  </mat-form-field>

  <button mat-raised-button color="primary" (click)="save()">
    Save
  </button>
  <button mat-raised-button color="primary" (click)="saveAsDraft()">
    Save As Draft
  </button>
</form>
}

<hr />
@if(products$ | async; as products){
<mat-list>
  <mat-list-item *ngFor="let p of products">
    {{ p.title }} - ₹{{ p.price }}
    <button mat-button (click)="edit(p)">Edit</button>
    <button mat-button color="warn" (click)="delete(p)">Delete</button>
    @if(!p.isValid){
    <button mat-button (click)="disCardDraft(p)">Discard Draft</button>
    }
  </mat-list-item>
</mat-list>
} -->

<h1 class="page-title">Product Manager</h1>

<div *ngIf="model$ | async as model" class="form-container">
  <mat-card>
    <form #productForm="ngForm">
      <mat-form-field appearance="fill" class="form-field">
        <mat-label>Title</mat-label>
        <input #title="ngModel" matInput name="title" required [(ngModel)]="model.title" />
        <mat-error *ngIf="title.invalid && title.touched">Title is required</mat-error>
      </mat-form-field>

      <mat-form-field appearance="fill" class="form-field">
        <mat-label>Description</mat-label>
        <input
          #description="ngModel"
          matInput
          name="description"
          required
          [(ngModel)]="model.description"
        />
        <mat-error *ngIf="description.invalid && description.touched"
          >Description is required</mat-error
        >
      </mat-form-field>

      <mat-form-field appearance="fill" class="form-field">
        <mat-label>Price</mat-label>
        <input
          #price="ngModel"
          matInput
          type="number"
          name="price"
          required
          min="0"
          [(ngModel)]="model.price"
        />
        <mat-error *ngIf="price.invalid && price.touched">Price is required</mat-error>
      </mat-form-field>

      <div class="button-group">
        <button
          mat-raised-button
          color="primary"
          [disabled]="!productForm.form.valid"
          (click)="save()"
        >
          Save
        </button>

        <button
          mat-raised-button
          color="accent"
          [disabled]="!productForm.form.valid"
          (click)="saveAsDraft()"
        >
          Save As Draft
        </button>
      </div>
    </form>
  </mat-card>
</div>

<hr />

<div *ngIf="products$ | async as products" class="list-container">
  <div class="grid-wrapper">
    <mat-card *ngFor="let p of products" class="product-card">
      <div class="card-content">
        <div class="product-title">{{ p.title }} - ₹{{ p.price }}</div>
        <div class="product-actions">
          <button mat-stroked-button color="primary" (click)="edit(p)">Edit</button>
          <button mat-stroked-button color="warn" (click)="delete(p)">Delete</button>
          <button *ngIf="!p.isValid" mat-stroked-button color="accent" (click)="disCardDraft(p)">
            Discard Draft
          </button>
        </div>
      </div>
    </mat-card>
  </div>
</div>
